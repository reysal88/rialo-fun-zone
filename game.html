<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rialo Game - HP Touch</title>
<style>
body { margin:0; padding:0; background:#000; font-family:Arial; color:#fff; text-align:center; overflow:hidden; }
#menu { position:absolute; width:100%; height:100%; display:flex; justify-content:center; align-items:center; flex-direction:column; }
#menu h1 { font-size:28px; margin:0; }
#menu button { font-size:16px; padding:5px 10px; cursor:pointer; margin-top:10px; }
canvas { display:block; margin:0 auto; background:#000; touch-action:none; }
#grialo { position:absolute; width:100%; height:100%; display:flex; justify-content:center; align-items:center; font-size:40px; color:white; display:none;
          text-shadow: 0 0 5px #fff, 0 0 10px #ff0, 0 0 20px #f0f, 0 0 30px #0ff;
          animation: glow 1s infinite alternate; }
@keyframes glow {
  from { text-shadow: 0 0 5px #fff, 0 0 10px #ff0, 0 0 20px #f0f, 0 0 30px #0ff; }
  to { text-shadow: 0 0 15px #fff, 0 0 30px #ff0, 0 0 50px #f0f, 0 0 80px #0ff; }
}
#gameOverText { position:absolute; width:100%; top:40%; text-align:center; font-size:36px; color:red; display:none; }
#restartBtn { margin-top:10px; padding:10px 20px; font-size:16px; display:none; cursor:pointer; }
#by { margin-top:10px; font-size:14px; }
</style>
</head>
<body>

<div id="menu">
  <h1>CATCH THE ORACLE</h1>
  <button id="playBtn">Play</button>
</div>

<div id="grialo">grialo</div>

<canvas id="gameCanvas" width="400" height="600" style="display:none;"></canvas>
<div id="gameOverText">GAME OVER</div>
<button id="restartBtn">Restart Game</button>
<div id="by">by rey88</div>

<script>
const menu = document.getElementById('menu');
const playBtn = document.getElementById('playBtn');
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const grialoDiv = document.getElementById('grialo');
const restartBtn = document.getElementById('restartBtn');
const gameOverText = document.getElementById('gameOverText');

let gameOver = false;
let score = 0;

// Ship
const ship = { x: 150, y: 500, width: 100, height: 100 };
const shipImg = new Image();
shipImg.src = 'images/pesawat-logo.png';

// Laser
const lasers = [];
const laserSpeed = 7;

// Monster
const monsters = [];
let monsterSize = 80;
let monsterSpeed = 2;
let spawnDelay = 1500;
let spawnTimer = 0;
const monsterImg = new Image();
monsterImg.src = 'images/monster-logo.png';

// Explosions
const explosions = [];

// Stars
const stars = [];
for(let i=0;i<100;i++){ stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*2+1 }); }
function drawStars(){ ctx.fillStyle='white'; stars.forEach(s=>{ ctx.beginPath(); ctx.arc(s.x,s.y,s.size,0,Math.PI*2); ctx.fill(); s.y+=1; if(s.y>canvas.height)s.y=0; }); }

// Monster spawn wave (2â€“3 monster tiap wave)
function spawnMonstersWave(){ 
  const numMonsters = 2 + Math.floor(Math.random()*2); // 2 atau 3 monster
  for(let i=0;i<numMonsters;i++){ 
    const x = Math.random()*(canvas.width-monsterSize); 
    monsters.push({ x:x, y:-monsterSize, width:monsterSize, height:monsterSize }); 
  } 
}

// Touch control
let touchX = null; let dragging=false;
canvas.addEventListener('touchstart', e=>{ const rect=canvas.getBoundingClientRect(); touchX=e.touches[0].clientX-rect.left; const touchY=e.touches[0].clientY-rect.top; dragging=(touchX>=ship.x && touchX<=ship.x+ship.width && touchY>=ship.y && touchY<=ship.y+ship.height); if(dragging) shootLaser(); });
canvas.addEventListener('touchmove', e=>{ if(dragging){ const rect=canvas.getBoundingClientRect(); touchX=e.touches[0].clientX-rect.left; ship.x=touchX-ship.width/2; if(ship.x<0)ship.x=0; if(ship.x+ship.width>canvas.width)ship.x=canvas.width-ship.width; }});
canvas.addEventListener('touchend', e=>{ dragging=false; });

// Shoot
function shootLaser(){ lasers.push({ x: ship.x + ship.width/2 - 2.5, y: ship.y, width:5, height:20 }); }

// Update
function update(){
  if(gameOver) return;
  drawStars();

  spawnTimer+=16;
  if(spawnTimer>=spawnDelay){ spawnMonstersWave(); spawnTimer=0; }

  // Monster speed naik 5% tiap 500 poin
  if(score>=500 && score % 500 === 0){ monsterSpeed *= 1.05; spawnDelay = Math.max(500, spawnDelay-10); }

  for(let i=lasers.length-1;i>=0;i--){ lasers[i].y-=laserSpeed; if(lasers[i].y+lasers[i].height<0) lasers.splice(i,1); }

  for(let i=monsters.length-1;i>=0;i--){
    monsters[i].y += monsterSpeed;
    // Collision with ship
    if(ship.x < monsters[i].x + monsters[i].width && ship.x + ship.width > monsters[i].x && ship.y < monsters[i].y + monsters[i].height && ship.y + ship.height > monsters[i].y){
      gameOver=true; gameOverText.style.display='block'; restartBtn.style.display='inline-block';
    }
    // Collision with lasers
    for(let j=lasers.length-1;j>=0;j--){
      if(lasers[j].x < monsters[i].x + monsters[i].width && lasers[j].x + lasers[j].width > monsters[i].x &&
         lasers[j].y < monsters[i].y + monsters[i].height && lasers[j].y + lasers[j].height > monsters[i].y){
        explosions.push({ x: monsters[i].x+monsterSize/2, y: monsters[i].y+monsterSize/2, radius: 0, maxRadius: 40 });
        monsters.splice(i,1); lasers.splice(j,1); score+=10; break;
      }
    }
    if(monsters[i] && monsters[i].y>canvas.height) monsters.splice(i,1);
  }

  // Update explosions
  explosions.forEach((ex,i)=>{
    ex.radius += 2;
    if(ex.radius >= ex.maxRadius) explosions.splice(i,1);
  });
}

// Draw
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawStars();
  // Ship
  ctx.drawImage(shipImg, ship.x, ship.y, ship.width, ship.height);
  // Lasers glow
  lasers.forEach(l=>{
    ctx.fillStyle='red';
    ctx.shadowColor='red';
    ctx.shadowBlur=10;
    ctx.fillRect(l.x,l.y,l.width,l.height);
    ctx.shadowBlur=0;
  });
  // Monsters
  monsters.forEach(m=>{
    ctx.drawImage(monsterImg,m.x,m.y,m.width,m.height);
    ctx.fillStyle='yellow';
    ctx.font='14px Arial';
    ctx.textAlign='center';
    ctx.fillText('Oracle', m.x+m.width/2, m.y-5);
  });
  // Explosions
  explosions.forEach(ex=>{
    let gradient = ctx.createRadialGradient(ex.x, ex.y, 0, ex.x, ex.y, ex.radius);
    gradient.addColorStop(0,'yellow');
    gradient.addColorStop(0.5,'orange');
    gradient.addColorStop(1,'red');
    ctx.fillStyle = gradient;
    ctx.beginPath();
    ctx.arc(ex.x, ex.y, ex.radius, 0, Math.PI*2);
    ctx.fill();
  });
  // Score
  ctx.fillStyle='#fff';
  ctx.font='20px Arial';
  ctx.textAlign='center';
  ctx.fillText('Score: '+score, canvas.width/2, 30);
}

// Loop
function loop(){ update(); draw(); requestAnimationFrame(loop); }
loop();

// Play button -> show grialo 2 detik, then start game
playBtn.addEventListener('click', ()=>{
  menu.style.display='none';
  grialoDiv.style.display='flex';
  setTimeout(()=>{
    grialoDiv.style.display='none';
    canvas.style.display='block';
  },2000);
});

// Restart
restartBtn.addEventListener('click', ()=>{
  monsters.length=0; lasers.length=0; score=0; gameOver=false;
  ship.x = canvas.width/2 - ship.width/2;
  monsterSpeed = 2;
  spawnDelay = 1500;
  gameOverText.style.display='none';
  restartBtn.style.display='none';
});
</script>

</body>
</html>
