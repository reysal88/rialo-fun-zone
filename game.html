<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rialo Game - HP Touch</title>
<style>
  body { margin:0; padding:0; background:#000; font-family:Arial; color:#fff; text-align:center; }
  #menu { display:flex; justify-content:center; align-items:center; height:100vh; flex-direction:row; gap:10px; }
  #menu h1 { font-size: 28px; margin:0; }
  #menu button { font-size: 16px; padding:5px 10px; cursor:pointer; }
  canvas { display:block; margin:0 auto; background:#000; touch-action: none; }
  #restartBtn { margin-top:10px; padding:10px 20px; font-size:16px; display:none; cursor:pointer; }
  #by { margin-top:30px; font-size:14px; }
</style>
</head>
<body>

<div id="menu">
  <h1>CATCH THE ORACLE</h1>
  <button id="playBtn">Play</button>
</div>

<canvas id="gameCanvas" width="400" height="600" style="display:none;"></canvas>
<button id="restartBtn">Restart Game</button>
<div id="by">by rey88</div>

<script>
// Canvas
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Menu
const menu = document.getElementById('menu');
const playBtn = document.getElementById('playBtn');
playBtn.addEventListener('click', ()=>{
  menu.style.display='none';
  canvas.style.display='block';
});

// Restart
const restartBtn = document.getElementById('restartBtn');
restartBtn.addEventListener('click', ()=>{
  monsters.length=0; lasers.length=0; score=0; gameOver=false;
  ship.x = canvas.width/2 - ship.width/2;
  monsterSpeed = 2;
  spawnDelay = 1500;
  restartBtn.style.display='none';
});

// Game variables
let gameOver = false;
let score = 0;

// Ship
const ship = { x: 150, y: 500, width: 100, height: 100 };
const shipImg = new Image();
shipImg.src = 'images/pesawat-logo.png';

// Laser
const lasers = [];
const laserSpeed = 7;

// Monster
const monsters = [];
let monsterSize = 80;
let monsterSpeed = 2;
let spawnDelay = 1500;
let spawnTimer = 0;
const monsterImg = new Image();
monsterImg.src = 'images/monster-logo.png';

// Stars for dynamic background
const stars = [];
for(let i=0;i<100;i++){
  stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*2+1 });
}

// Draw stars
function drawStars(){
  ctx.fillStyle = 'white';
  stars.forEach(s=>{
    ctx.beginPath();
    ctx.arc(s.x, s.y, s.size, 0, Math.PI*2);
    ctx.fill();
    s.y += 1;
    if(s.y>canvas.height) s.y=0;
  });
}

// Monster spawn wave
function spawnMonstersWave(){
  const numMonsters = Math.min(3 + Math.floor(score/100), 6); // 3-6 monster per wave
  for(let i=0;i<numMonsters;i++){
    const x = Math.random()*(canvas.width-monsterSize);
    monsters.push({ x:x, y:-monsterSize, width:monsterSize, height:monsterSize });
  }
}

// Touch control
let touchX = null;
let dragging = false;

canvas.addEventListener('touchstart', e=>{
  const rect = canvas.getBoundingClientRect();
  touchX = e.touches[0].clientX - rect.left;
  const touchY = e.touches[0].clientY - rect.top;
  dragging = (touchX >= ship.x && touchX <= ship.x+ship.width && touchY >= ship.y && touchY <= ship.y+ship.height);
  if(dragging) shootLaser();
});

canvas.addEventListener('touchmove', e=>{
  if(dragging){
    const rect = canvas.getBoundingClientRect();
    touchX = e.touches[0].clientX - rect.left;
    ship.x = touchX - ship.width/2;
    if(ship.x<0) ship.x=0;
    if(ship.x+ship.width>canvas.width) ship.x=canvas.width-ship.width;
  }
});

canvas.addEventListener('touchend', e=>{ dragging=false; });

// Shoot function
function shootLaser(){ lasers.push({ x: ship.x + ship.width/2 - 2.5, y: ship.y, width:5, height:20 }); }

// Update game
function update(){
  if(gameOver) return;

  // Update stars
  drawStars();

  // Spawn monsters timer
  spawnTimer += 16;
  if(spawnTimer >= spawnDelay){
    spawnMonstersWave();
    spawnTimer = 0;
  }

  // Increase difficulty per 100 points
  if(score >= 100 && score % 100 === 0){
    monsterSpeed += 0.5;
    spawnDelay = Math.max(500, spawnDelay - 100);
  }

  // Update lasers
  for(let i=lasers.length-1;i>=0;i--){
    lasers[i].y -= laserSpeed;
    if(lasers[i].y+lasers[i].height<0) lasers.splice(i,1);
  }

  // Update monsters
  for(let i=monsters.length-1;i>=0;i--){
    monsters[i].y += monsterSpeed;

    // Collision with ship
    if(ship.x < monsters[i].x + monsters[i].width &&
       ship.x + ship.width > monsters[i].x &&
       ship.y < monsters[i].y + monsters[i].height &&
       ship.y + ship.height > monsters[i].y){
         gameOver = true;
         restartBtn.style.display='inline-block';
    }

    // Collision with lasers
    for(let j=lasers.length-1;j>=0;j--){
      if(lasers[j].x < monsters[i].x + monsters[i].width &&
         lasers[j].x + lasers[j].width > monsters[i].x &&
         lasers[j].y < monsters[i].y + monsters[i].height &&
         lasers[j].y + lasers[j].height > monsters[i].y){
           monsters.splice(i,1);
           lasers.splice(j,1);
           score += 10;
           break;
      }
    }

    // Remove off-screen monsters
    if(monsters[i] && monsters[i].y>canvas.height) monsters.splice(i,1);
  }
}

// Draw everything
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Draw stars first
  drawStars();

  // Draw ship
  ctx.drawImage(shipImg, ship.x, ship.y, ship.width, ship.height);

  // Draw lasers
  ctx.fillStyle='red';
  lasers.forEach(l=>ctx.fillRect(l.x,l.y,l.width,l.height));

  // Draw monsters
  monsters.forEach(m=>{
    ctx.drawImage(monsterImg, m.x, m.y, m.width, m.height);
    ctx.fillStyle='yellow';
    ctx.font='14px Arial';
    ctx.textAlign='center';
    ctx.fillText('Oracle', m.x+m.width/2, m.y-5);
  });

  // Draw score in center top
  ctx.fillStyle='#fff';
  ctx.font='20px Arial';
  ctx.textAlign='center';
  ctx.fillText('Score: '+score, canvas.width/2, 30);
}

// Game loop
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
